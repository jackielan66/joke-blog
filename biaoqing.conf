server {
    listen 80;
    server_name localhost;

    # 解决中文乱码问题
    charset utf-8;

    location / {
        proxy_pass http://biaoqing001.com/;
        
        # 基础代理头设置
        proxy_set_header Host biaoqing001.com;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Referer http://biaoqing001.com/;
        
        # 特殊配置（应对可能的反爬机制）
        proxy_set_header User-Agent "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36";
        proxy_set_header Accept "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8";
        proxy_set_header Accept-Language "zh-CN,zh;q=0.9";
        
        # 内容重写（重要！解决绝对路径问题）
        sub_filter 'biaoqing001.com' '$host';
        sub_filter_once off;
        
        # 禁用压缩以允许sub_filter工作
        proxy_set_header Accept-Encoding "";
        
        # 超时设置
        proxy_connect_timeout 60s;
        proxy_read_timeout 60s;
    }
}